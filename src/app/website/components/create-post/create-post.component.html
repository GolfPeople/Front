<ion-header class="ion-text-center">
  <ion-toolbar>
    <ion-title>
      <h2>
        <img src="../../../../assets/icon/create-post.png" alt="" /> crear
        publicacion
      </h2>
    </ion-title>
    <ion-buttons slot="start">
      <ion-button color="primary" shape="round" (click)="closeModal()">
        <img src="../../../../assets/icon/back-link.png" alt="" />
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="content">
  <ion-row class="ion-justify-content-center ion-align-items-center">
    <div class="pick-image-container">
      <div *ngIf="tempImages.length === 0" class="button-container">
        <input
          type="file"
          #fileInput
          (change)="uploadFile($event)"
          accept="image/*,video/*"
          hidden="true"
          multiple="true"
        />
        <input
          type="file"
          #fileInputVideo
          (change)="uploadFile($event)"
          hidden="true"
          multiple="true"
          accept="video/*;capture=camcorder"
        />
        <ion-button (click)="selectImageSource()">
          <img src="../../../../assets/icon/camera.png" alt="" />
        </ion-button>
      </div>
      <p *ngIf="tempImages.length === 0" class="text ion-text-center">
        ¿Alguna foto/vídeo que quieras compartir con la comunidad?
      </p>
      <swiper *ngIf="backgroundImages.length > 0" #swiper>
        <ng-template *ngFor="let image of backgroundImages" swiperSlide>
          <img [src]="image" class="picture" alt="" />
        </ng-template>
      </swiper>
      <swiper *ngIf="backgroundImagesEdit.length > 0" #swiper>
        <ng-template *ngFor="let image of backgroundImagesEdit" swiperSlide>
          <img [src]="image.url || image" class="picture" alt="" />
        </ng-template>
      </swiper>
    </div>

    <div class="footer">
      <p class="text">Escribe un pie para tu foto</p>
      <ion-textarea
        type="text"
        inputmode="text"
        [maxlength]="2000"
        class="text"
        [formControl]="textArea"
      >
      </ion-textarea>
    </div>

    <form>
      <ion-list>
        <ion-item lines="none" class="ion-align-items-center">
          <ion-label position="floating">
            <p>Agregar hashtags</p>
          </ion-label>
          <ion-input
            type="text"
            placeholder="Hashtags"
            (ionChange)="hashtag($event)"
            [formControl]="hashtagsInput"
          >
          </ion-input>
          <!-- <ion-buttons slot="end"> -->
          <ion-button slot="end" color="primary" (click)="addHashtags()">
            <ion-icon name="add"></ion-icon>
          </ion-button>
          <!-- </ion-buttons> -->
        </ion-item>
        <ion-row>
          <ion-col *ngFor="let hashtag of hashtags" size="4">
            <div class="hashtags">
              <p>#{{ hashtag }}</p>
              <a (click)="removeHashtag(hashtag)">X</a>
            </div>
          </ion-col>
          <ion-col *ngFor="let hashtag of postHashtags" size="4">
            <div class="hashtags">
              <p>#{{ hashtag }}</p>
              <a (click)="removeHashtag(hashtag)">X</a>
            </div>
          </ion-col>
        </ion-row>
        <ion-item>
          <ion-label position="floating">
            <img class="tag" src="../../../../assets/icon/tag.png" alt="" />
            Etiqueta a tus amigos
          </ion-label>
          <ion-input></ion-input>
        </ion-item>

        <p class="card-text text-center">¿Dónde vives?</p>
        <div class="data-input">
          <img class="geo" src="../../../assets/icon/geolocation.png" alt="" />
          <input
            type="text"
            name="license"
            placeholder=" Ubicación Actual"
            id="location"
            [formControl]="address"
          />
        </div>
        <br />
      </ion-list>

      <ion-button
        *ngIf="editPost === false"
        (click)="onSubmit(textArea.value, blobArrayData, address.value)"
        type="submit"
        class="next-button"
        shape="round"
      >
        PUBLICAR
      </ion-button>

      <ion-button
        *ngIf="editPost === true"
        (click)="edit(textArea.value, address.value, blobArrayData)"
        type="submit"
        class="next-button"
        shape="round"
      >
        EDITAR
      </ion-button>
    </form>
    <!-- </div> -->
  </ion-row>
</ion-content>
